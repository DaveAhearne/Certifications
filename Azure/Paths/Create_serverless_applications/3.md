# Execute an Azure Function with Triggers

## Introduction
Function apps support triggering based on time or when a specific event occurs, these are called *triggers* they determine how an azure function is executed

## Determine the best trigger for your azure function
Function apps don't do work until something tells it to run, if we have an application that sends reminder messages but nothing ever tells it to run then the customers won't ever get reminder messages

### Triggers
A trigger is an object that defines how the azure functions are called, every function must have **exactly one trigger associated with it** if you want logic that runs under multiple conditions *you will have to create multiple functions that share the same source*


### Trigger Types
| **Type**  | **Purpose**  |
|---|---|
| Timer  |  Executes on a set interval |
| HTTP  | Executes when an HTTP request is received |
| Blob  | Executes when a file is uploaded or updated in blob storage  |
| Queue  | Executes when a message is added to azure storage queue  |
| Azure Cosmos DB  |  Executes a function when a document changes in the collection |
|  Event Hub | Executes when event hub receives a new event |

### Bindings
A binding is an abstract connection to data within your function. Bindings are *optional* and **you can have zero or more bindings**

An input binding is the data your function receives, an output binding is the data your function sends

## Run an Azure function on a schedule
If you want to do something on a set schedule e.g. Send out weekly mailshots to customers then a timer trigger with a function app is the most suitable solution

### Timer trigger
To create a timer trigger you need to supply:
1. A *timestamp parameter name*, which is an identifier to access the trigger in code
2. A schedule as a CRON expression* for the interval

### Creating a timer trigger
To create a timer trigger from an existing function app:
1. Select "New Function"
2. Select the "Timer Trigger" template
3. Specify the function name and the CRON schedule

## Execute an Azure function with an HTTP request
An HTTP trigger will execute the function when it gets an HTTP request, you can customize the HTTP triggers in various ways:
* Authorized only access controlled by keys
* Restrict which HTTP verbs are used
* Return data back to the caller
* Get data from the query string or request body
* Use route templates to modify the function URL

When you create a http trigger function, you select the language, name and *authorization level*, the authorization level is a flag on the trigger that specifies if you need an API key for authentication

### Authorization Levels

There are three main ones:

* Function - Requires a Key
* Admin  - Requires a Key
* Anonymous - **No key required**, no authorization is required

There are two types of keys that vary in their scope:

* Function - These are specific to *one function inside the function app*
* Host - Applies to *all functions inside the function app*

If your authorization is set to function level, you can use a function or a host key. If your authorization level is set higher to admin *you must supply a host key* as the function key only has a subset of access whereas the host key has a superset of access for the function app

## Execute an Azure function when a blob is called

## Summary